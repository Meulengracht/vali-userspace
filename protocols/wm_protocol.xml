<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<root>
    <types>
        <type name="uint32_t" header="stdint.h" />
        <type name="UUId_t" header="os/osdefs.h" />
    </types>
    <enums>
        <enum name="pixel_format">
            <value name="format_a8r8g8b8" />
            <value name="format_x8r8g8b8" />
        </enum>
    </enums>
    <protocols namespace="wm">
        <protocol name="core" id="0x10">
            <enums>
                <enum name="object_type">
                    <value name="object_type_screen"></value>
                    <value name="object_type_memory"></value>
                    <value name="object_type_memory_pool"></value>
                    <value name="object_type_surface"></value>
                    <value name="object_type_buffer"></value>
                </enum>
            </enums>
            
            <functions>
                <function name="sync">
                    <request>
                        <param name="serial" type="uint32_t" count="1" />
                    </request>
                </function>
                <function name="get_objects" />
            </functions>
            
            <events>
                <event name="error">
                    <param name="object_id" type="uint32_t" count="1" />
                    <param name="error_id" type="int" count="1" />
                    <param name="error_description" type="string" />
                </event>
                <event name="sync">
                    <param name="serial" type="uint32_t" count="1" />
                </event>
                <event name="object">
                    <param name="object_id" type="uint32_t" count="1" />
                    <param name="system_handle" type="UUId_t" count="1" />
                    <param name="type" type="object_type" count="1" />
                </event>
            </events>
        </protocol>
        
        <protocol name="screen" id="0x11">
            <enums>
                <enum name="mode_attributes">
                    <value name="mode_current" value="0x1"></value>
                    <value name="mode_preferred" value="0x2"></value>
                </enum>
                <enum name="transform">
                    <value name="no_transform"></value>
                    <value name="rotate_90"></value>
                    <value name="rotate_180"></value>
                    <value name="rotate_270"></value>
                </enum>
            </enums>

            <functions>
                <function name="get_properties">
                    <request>
                        <param name="screen_id" type="uint32_t" count="1" />
                    </request>
                </function>
                <function name="get_modes">
                    <request>
                        <param name="screen_id" type="uint32_t" count="1" />
                    </request>
                </function>
                <function name="set_scale">
                    <request>
                        <param name="screen_id" type="uint32_t" count="1" />
                        <param name="scale" type="int" count="1" />
                    </request>
                </function>
                <function name="set_transform">
                    <request>
                        <param name="screen_id" type="uint32_t" count="1" />
                        <param name="transform" type="transform" count="1" />
                    </request>
                </function>
                <function name="create_surface">
                    <request>
                        <param name="screen_id" type="uint32_t" count="1" />
                        <param name="surface_id" type="uint32_t" count="1" />
                        <param name="width" type="int" count="1" />
                        <param name="height" type="int" count="1" />
                    </request>
                </function>
            </functions>
            
            <events>
                <event name="screen_properties">
                    <param name="screen_id" type="uint32_t" count="1" />
                    <param name="x" type="int" count="1" />
                    <param name="y" type="int" count="1" />
                    <param name="transform" type="transform" count="1" />
                    <param name="scale" type="int" count="1" />
                </event>
                <event name="mode">
                    <param name="screen_id" type="uint32_t" count="1" />
                    <param name="flags" type="mode_attributes" count="1" />
                    <param name="resolution_x" type="int" count="1" />
                    <param name="resolution_y" type="int" count="1" />
                    <param name="refresh_rate" type="int" count="1" />
                </event>
            </events>
        </protocol>
        
        <protocol name="memory" id="0x12">
            <functions>
                <function name="create_pool">
                    <request>
                        <param name="memory_id" type="uint32_t" count="1" />
                        <param name="pool_id" type="uint32_t" count="1" />
                        <param name="size" type="int" count="1" />
                    </request>
                </function>
            </functions>
        </protocol>
        
        <protocol name="memory_pool" id="0x13">
            <functions>
                <function name="create_buffer">
                    <request>
                        <param name="pool_id" type="uint32_t" count="1" />
                        <param name="buffer_id" type="uint32_t" count="1" />
                        <param name="offset" type="int" count="1" />
                        <param name="width" type="int" count="1" />
                        <param name="height" type="int" count="1" />
                        <param name="stride" type="int" count="1" />
                        <param name="format" type="pixel_format" count="1" />
                    </request>
                </function>
            </functions>
        </protocol>
        
        <protocol name="surface" id="0x14">
            <enums>
                <enum name="edge">
                    <value name="no_edges" value="0" />
                    <value name="top_left" value="0x1" />
                    <value name="top_right" value="0x2" />
                    <value name="bottom_left" value="0x4" />
                    <value name="bottom_right" value="0x8" />
                </enum>
            </enums>
            
            <functions>
                <function name="get_formats">
                    <request>
                        <param name="surface_id" type="uint32_t" count="1" />
                    </request>
                </function>
                <function name="set_buffer">
                    <request>
                        <param name="surface_id" type="uint32_t" count="1" />
                        <param name="buffer_id" type="uint32_t" count="1" />
                    </request>
                </function>
                <function name="invalidate">
                    <request>
                        <param name="surface_id" type="uint32_t" count="1" />
                        <param name="x" type="int"/>
                        <param name="y" type="int"/>
                        <param name="width" type="int"/>
                        <param name="height" type="int"/>
                    </request>
                </function>
                <function name="set_input_region">
                    <request>
                        <param name="surface_id" type="uint32_t" count="1" />
                        <param name="x" type="int"/>
                        <param name="y" type="int"/>
                        <param name="width" type="int"/>
                        <param name="height" type="int"/>
                    </request>
                </function>
                <function name="add_subsurface">
                    <request>
                        <param name="parent_id" type="uint32_t" count="1" />
                        <param name="child_id" type="uint32_t" count="1" />
                        <param name="x" type="int"/>
                        <param name="y" type="int"/>
                    </request>
                </function>
                <function name="request_frame">
                    <request>
                        <param name="surface_id" type="uint32_t" count="1" />
                    </request>
                </function>
                <function name="commit">
                    <request>
                        <param name="surface_id" type="uint32_t" count="1" />
                    </request>
                </function>
                <function name="resize">
                    <request>
                        <param name="surface_id" type="uint32_t" count="1" />
                        <param name="edges" type="edge"/>
                    </request>
                </function>
                <function name="move">
                    <request>
                        <param name="surface_id" type="uint32_t" count="1" />
                    </request>
                </function>
                <function name="destroy">
                    <request>
                        <param name="surface_id" type="uint32_t" count="1" />
                    </request>
                </function>
            </functions>
            
            <events>
                <event name="format">
                    <param name="surface_id" type="uint32_t" count="1" />
                    <param name="format" type="pixel_format" count="1" />
                </event>
                <event name="frame">
                    <param name="surface_id" type="uint32_t" count="1" />
                </event>
                <event name="resize">
                    <param name="surface_id" type="uint32_t" count="1" />
                    <param name="width" type="int" count="1" />
                    <param name="height" type="int" count="1" />
                    <param name="edges" type="edge"/>
                </event>
            </events>
        </protocol>
        
        <protocol name="buffer" id="0x15">
            <functions>
                <function name="destroy">
                    <request>
                        <param name="buffer_id" type="uint32_t" count="1" />
                    </request>
                </function>
            </functions>
            
            <events>
                <event name="release">
                    <param name="buffer_id" type="uint32_t" count="1" />
                </event>
            </events>
        </protocol>
    </protocols>
</root>
